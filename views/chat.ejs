<% layout("layouts/boilerplate") %>
<div class="row flex-grow-1 d-flex justify-content-center m-0">
    <div class="col-md-4 d-flex flex-column p-0">
        <!-- <h4 class="channels-heading">Channels</h4> -->
        <div class="channels-container flex-grow-1">
            <ul class="channel-list">
                <% for(let i = 0; i < rooms.length; i++) {  %>
                <li class="channel-item"><a href="/chat/<%=rooms[i]._id%>"> # <%= rooms[i].name %> </a>
                    <!-- if current user is the creater of the room: add a delete button as well -->
                    <% if(JSON.stringify(signedInUser._id) == JSON.stringify(rooms[i].creator)) {%>
                    <input class="delete_btn hidden" value="&#10005;" type="button" name="<%=rooms[i].id%>">
                    <% } %>
                </li>
                <% } %>
            </ul>
        </div>
        <div class=" add-room d-flex mt-auto justify-content-center">
            <!-- Button trigger modal: set up a new room -->
            <button type="button" id="add-channel-btn" data-toggle="modal" data-target="#roomModal">
                + Add channel
            </button>

        </div>
    </div>

</div>

<!-- room Modal -->
<div class="modal fade" id="roomModal" tabindex="-1" aria-labelledby="roomModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="roomModalLabel">Create new room</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <label for="new_room">Type the name of the room and click create</label>
                <input id="new_room" type="text" maxlength="15" placeholder="Name of the room...">
            </div>
            <div class="modal-footer">
                <!-- <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button> -->
                <button id="add_room" type="button" class="btn btn-primary">Create</button>
            </div>
        </div>
    </div>
</div>
<script src="/public/scripts/chat.js"></script>